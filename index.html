<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <title>Sales Machine - Çağrı Merkezi Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#eef4ff",
                100: "#dbe6ff",
                200: "#b7ccff",
                300: "#8ea9ff",
                400: "#5c7dff",
                500: "#3b5bff",
                600: "#2c46db",
                700: "#2236b7",
                800: "#1d2f93",
                900: "#18256f",
              },
            },
          },
        },
      };
    </script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-slate-950 text-slate-50 antialiased">
    <div class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
      <div class="mx-auto max-w-7xl px-4 pb-10 pt-6 sm:px-6 lg:px-8">
        <!-- Header -->
        <header class="mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
          <div>
            <div
              class="inline-flex items-center gap-2 rounded-full bg-slate-900/80 px-3 py-1 text-[10px] font-medium uppercase tracking-[0.2em] text-slate-400 ring-1 ring-slate-700/70"
            >
              <span
                class="h-1.5 w-1.5 rounded-full bg-emerald-400 shadow-[0_0_0_4px_rgba(16,185,129,0.45)]"
              ></span>
              Sales Machine · Canlı İzleme
            </div>
            <h1 class="mt-3 text-2xl font-semibold tracking-tight text-slate-50 sm:text-3xl">
              Çağrı Merkezi Performans &amp; Satış Yönetimi
            </h1>
            <p class="mt-1 text-sm text-slate-400">
              Temsilci, kanal ve proje bazında gerçek zamanlı
              <span class="font-medium text-primary-200">Sales Machine</span> görünürlüğü.
            </p>
          </div>
          <div class="flex items-center gap-3">
            <button
              id="resetFiltersBtn"
              class="rounded-2xl border border-slate-700/70 bg-slate-900/80 px-3 py-1.5 text-xs font-medium text-slate-200 shadow-[0_12px_40px_rgba(15,23,42,0.8)] transition hover:border-slate-500/80 hover:bg-slate-800/80"
            >
              Filtreleri Temizle
            </button>
            <div
              id="summaryBadge"
              class="hidden items-center gap-2 rounded-2xl bg-slate-900/80 px-3 py-1.5 text-xs text-slate-300 ring-1 ring-slate-700/70 shadow-[0_12px_40px_rgba(15,23,42,0.9)] sm:flex"
            >
              <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
              <span id="summaryText">Bugün</span>
            </div>
          </div>
        </header>

        <!-- KPI Cards -->
        <section class="mb-6 grid gap-4 md:grid-cols-2 xl:grid-cols-4" id="kpiCards"></section>

        <!-- Filters + Drilldown Status -->
        <section class="mb-6 flex flex-col gap-4 lg:flex-row">
          <!-- Filters -->
          <div
            class="flex-1 rounded-3xl bg-slate-900/80 p-4 ring-1 ring-slate-800/80 shadow-[0_20px_60px_rgba(15,23,42,0.95)] backdrop-blur-xl"
          >
            <div class="mb-3 flex items-center justify-between gap-3">
              <div>
                <h2 class="text-sm font-semibold text-slate-50">Filtreler</h2>
                <p class="text-xs text-slate-400">Temsilci, proje ve platform bazlı görünüm.</p>
              </div>
              <button
                id="resetDrilldownBtn"
                class="inline-flex items-center gap-1 rounded-2xl border border-slate-700/80 px-3 py-1 text-[11px] font-medium text-slate-200 transition hover:border-slate-500/80 hover:bg-slate-800/80"
              >
                <span class="h-1.5 w-1.5 rounded-full bg-slate-400"></span>
                Drill-down sıfırla
              </button>
            </div>
            <div class="grid gap-3 md:grid-cols-3">
              <div>
                <label
                  class="mb-1 block text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"
                  >Temsilci</label
                >
                <select
                  id="agentFilter"
                  class="w-full rounded-2xl border border-slate-700/80 bg-slate-950/70 px-3 py-2 text-xs text-slate-100 shadow-inner focus:border-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-500"
                >
                  <option value="ALL">Tümü</option>
                </select>
              </div>
              <div>
                <label
                  class="mb-1 block text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"
                  >Proje</label
                >
                <select
                  id="projectFilter"
                  class="w-full rounded-2xl border border-slate-700/80 bg-slate-950/70 px-3 py-2 text-xs text-slate-100 shadow-inner focus:border-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-500"
                >
                  <option value="ALL">Tümü</option>
                </select>
              </div>
              <div>
                <label
                  class="mb-1 block text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"
                  >Platform</label
                >
                <select
                  id="platformFilter"
                  class="w-full rounded-2xl border border-slate-700/80 bg-slate-950/70 px-3 py-2 text-xs text-slate-100 shadow-inner focus:border-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-500"
                >
                  <option value="ALL">Tümü</option>
                </select>
              </div>
            </div>
            <div class="mt-4">
              <label
                class="mb-1 block text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"
                >Hızlı Arama</label
              >
              <div class="relative">
                <input
                  id="searchInput"
                  placeholder="Müşteri, ID, temsilci, proje..."
                  class="w-full rounded-2xl border border-slate-700/80 bg-slate-950/70 py-2 pl-8 pr-3 text-xs text-slate-100 placeholder:text-slate-500 shadow-inner focus:border-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-500"
                />
                <span
                  class="pointer-events-none absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-500"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    class="h-4 w-4"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.6"
                  >
                    <circle cx="11" cy="11" r="6" />
                    <line x1="16" y1="16" x2="21" y2="21" />
                  </svg>
                </span>
              </div>
            </div>
          </div>

          <!-- Drilldown Status -->
          <div
            class="w-full rounded-3xl bg-slate-900/80 p-4 ring-1 ring-slate-800/80 shadow-[0_20px_60px_rgba(15,23,42,0.95)] backdrop-blur-xl lg:max-w-sm"
          >
            <h2 class="mb-3 text-sm font-semibold text-slate-50">Drill-down Durumu</h2>
            <div class="space-y-2 text-xs text-slate-300">
              <div class="flex items-center justify-between">
                <span class="text-slate-400">Funnel</span>
                <span
                  id="funnelStatus"
                  class="rounded-full bg-slate-800/90 px-3 py-1 text-[11px]"
                >
                  Tümü
                </span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-400">Grafik Seçimi</span>
                <span
                  id="chartStatus"
                  class="rounded-full bg-slate-800/90 px-3 py-1 text-[11px]"
                >
                  Yok
                </span>
              </div>
              <div
                class="mt-3 rounded-2xl bg-gradient-to-r from-primary-500/20 via-emerald-500/10 to-sky-500/20 p-3 text-[11px] text-slate-100 ring-1 ring-primary-500/40"
              >
                Grafiklerin üzerine tıklayarak tabloyu filtreleyebilirsiniz.
                <span class="font-medium text-primary-200">
                  Tek tık = filtrele, butonlar = sıfırla.
                </span>
              </div>
            </div>
          </div>
        </section>

        <!-- Charts -->
        <section class="grid gap-4 lg:grid-cols-2">
          <!-- Sales Funnel -->
          <div
            class="rounded-3xl bg-slate-900/80 p-4 ring-1 ring-slate-800/80 shadow-[0_20px_60px_rgba(15,23,42,0.95)] backdrop-blur-xl"
          >
            <div class="mb-3 flex items-center justify-between gap-3">
              <div>
                <h2 class="text-sm font-semibold text-slate-50">Sales Funnel</h2>
                <p class="text-xs text-slate-400">
                  Lead girişi &gt;
